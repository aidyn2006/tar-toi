<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Свадебное приглашение</title>
    <link href="https://fonts.googleapis.com/css2?family=EB+Garamond:ital,wght@0,400;0,500;1,400;1,500&family=Tenor+Sans&family=Cormorant:ital,wght@1,300;1,400;1,600&display=swap" rel="stylesheet">
    <style>
        /* ═══════════════════════════════════════
           CSS VARIABLES — заменяются на палитру
        ═══════════════════════════════════════ */
        :root {
            --wine:       #1a3a5c;
            --wine-dark:  #0d2340;
            --wine-light: #2a5080;
            --gold:       #a8c0d8;
            --gold-light: #d4e6f4;
            --cream:      #f0f5fa;
            --text:       #0d1e30;
        }

        /* ═══════════════════════════════════════
           BASE
        ═══════════════════════════════════════ */
        * { margin: 0; padding: 0; box-sizing: border-box; }
        html { scroll-behavior: smooth; }

        body {
            background: var(--cream);
            font-family: 'EB Garamond', serif;
            color: var(--text);
            overflow-x: hidden;
        }

        /* ═══════════════════════════════════════
           HERO
        ═══════════════════════════════════════ */
        .hero {
            min-height: 100svh;
            position: relative;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: flex-end;
            overflow: hidden;
            background: var(--wine-dark);
        }

        /* photo */
        .hero-photo-wrap {
            position: absolute;
            inset: 0;
            z-index: 0;
        }

        .hero-photo-img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            display: block;
            opacity: 0.55;
        }

        .hero-photo-placeholder {
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            gap: 14px;
            background: linear-gradient(160deg, #0a1e38 0%, #1a3a5c 50%, #06121f 100%);
        }

        .hero-photo-placeholder svg { opacity: 0.12; }
        .hero-photo-placeholder span {
            font-family: 'Tenor Sans', sans-serif;
            font-size: 10px;
            letter-spacing: 4px;
            color: rgba(212,230,244,0.3);
            text-transform: uppercase;
        }

        /* gradient overlay */
        .hero-overlay {
            position: absolute; inset: 0; z-index: 1;
            background: linear-gradient(
                    to bottom,
                    rgba(13,35,64,0.3) 0%,
                    rgba(13,35,64,0.05) 30%,
                    rgba(13,35,64,0.5) 65%,
                    rgba(6,18,31,0.97) 100%
            );
        }

        /* star field */
        .stars {
            position: absolute; inset: 0; z-index: 1; pointer-events: none;
        }

        /* constellation lines */
        .constellation {
            position: absolute; inset: 0; z-index: 1; pointer-events: none;
            opacity: 0.18;
        }

        /* hero content */
        .hero-content {
            position: relative; z-index: 2;
            text-align: center;
            padding: 0 32px 64px;
            width: 100%;
            max-width: 680px;
        }

        .hero-eyebrow {
            font-family: 'Tenor Sans', sans-serif;
            font-size: 9px;
            letter-spacing: 6px;
            color: var(--gold);
            opacity: 0.7;
            text-transform: uppercase;
            margin-bottom: 20px;
            animation: fadeUp 1s 0.2s both;
        }

        .hero-names {
            font-family: 'Cormorant', serif;
            font-style: italic;
            font-weight: 300;
            font-size: clamp(56px, 12vw, 96px);
            color: var(--gold-light);
            line-height: 0.88;
            margin-bottom: 22px;
            animation: fadeUp 1s 0.5s both;
        }

        .hero-amp {
            display: block;
            font-size: 0.48em;
            color: var(--gold);
            line-height: 1.7;
            opacity: 0.9;
        }

        .hero-dateline {
            font-family: 'Tenor Sans', sans-serif;
            font-size: 10px;
            letter-spacing: 5px;
            color: var(--gold);
            opacity: 0.8;
            margin-bottom: 32px;
            animation: fadeUp 1s 0.8s both;
        }

        /* music button */
        .music-btn {
            display: inline-flex;
            align-items: center;
            gap: 10px;
            background: rgba(168,192,216,0.1);
            border: 1px solid rgba(168,192,216,0.25);
            border-radius: 50px;
            padding: 10px 24px;
            cursor: pointer;
            transition: all 0.3s;
            animation: fadeUp 1s 1.1s both;
        }

        .music-btn:hover {
            background: rgba(168,192,216,0.18);
            border-color: rgba(168,192,216,0.5);
        }

        .music-btn span {
            font-family: 'Tenor Sans', sans-serif;
            font-size: 9px;
            letter-spacing: 2px;
            color: var(--gold-light);
            text-transform: uppercase;
        }

        .music-btn svg { color: var(--gold-light); flex-shrink: 0; }

        /* scroll cue */
        .scroll-cue {
            position: absolute; bottom: 16px; left: 50%; transform: translateX(-50%);
            z-index: 3; display: flex; flex-direction: column; align-items: center; gap: 8px;
            animation: fadeIn 1s 2s both;
        }

        .scroll-cue span {
            font-family: 'Tenor Sans', sans-serif;
            font-size: 7px; letter-spacing: 3px;
            color: var(--gold); opacity: 0.45;
        }

        .scroll-needle {
            width: 1px; height: 40px;
            background: linear-gradient(to bottom, var(--gold), transparent);
            animation: needlePulse 1.8s ease-in-out infinite;
        }

        @keyframes needlePulse {
            0%,100%{ opacity: 0.2; }
            50%{ opacity: 0.7; }
        }

        /* ═══════════════════════════════════════
           GALLERY CAROUSEL
        ═══════════════════════════════════════ */
        .gallery-section {
            background: var(--cream);
            padding: 80px 0 88px;
            overflow: hidden;
        }

        .section-head {
            text-align: center;
            margin-bottom: 40px;
            padding: 0 24px;
        }

        .section-tag {
            font-family: 'Tenor Sans', sans-serif;
            font-size: 8px;
            letter-spacing: 5px;
            color: var(--wine-light);
            opacity: 0.6;
            text-transform: uppercase;
            display: block;
            margin-bottom: 10px;
        }

        .section-title {
            font-family: 'Cormorant', serif;
            font-style: italic;
            font-weight: 300;
            font-size: clamp(30px, 5vw, 44px);
            color: var(--wine);
        }

        .carousel-viewport {
            overflow: hidden;
            touch-action: pan-y;
            user-select: none;
            position: relative;
        }

        .carousel-track {
            display: flex;
            gap: 14px;
            padding: 10px 36px;
            transition: transform 0.5s cubic-bezier(0.4,0,0.2,1);
            will-change: transform;
        }

        .car-slide {
            flex-shrink: 0;
            width: clamp(200px, 55vw, 300px);
            aspect-ratio: 3/4;
            border-radius: 6px;
            overflow: hidden;
            position: relative;
            box-shadow: 0 6px 40px rgba(13,35,64,0.15);
            transition: transform 0.35s ease, box-shadow 0.35s ease;
            cursor: pointer;
        }

        .car-slide.active {
            transform: scale(1.05);
            box-shadow: 0 12px 56px rgba(13,35,64,0.28);
        }

        .car-slide img {
            width: 100%; height: 100%;
            object-fit: cover; display: block;
        }

        .car-placeholder {
            width: 100%; height: 100%;
            display: flex; flex-direction: column;
            align-items: center; justify-content: center;
            gap: 12px;
        }

        .car-placeholder svg { opacity: 0.2; }
        .car-placeholder span {
            font-family: 'Tenor Sans', sans-serif;
            font-size: 9px; letter-spacing: 2px;
            opacity: 0.3; text-transform: uppercase;
        }

        .carousel-nav {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 18px;
            margin-top: 28px;
        }

        .nav-arrow {
            width: 38px; height: 38px;
            border-radius: 50%;
            border: 1px solid rgba(26,58,92,0.25);
            background: transparent;
            cursor: pointer;
            display: flex; align-items: center; justify-content: center;
            color: var(--wine);
            transition: all 0.25s;
        }

        .nav-arrow:hover {
            background: var(--wine);
            color: var(--gold-light);
            border-color: var(--wine);
        }

        .nav-dots {
            display: flex; gap: 8px; align-items: center;
        }

        .nav-dot {
            width: 5px; height: 5px;
            border-radius: 50%;
            background: var(--wine);
            opacity: 0.2;
            cursor: pointer;
            transition: all 0.3s;
        }

        .nav-dot.on {
            opacity: 1;
            transform: scale(1.4);
        }

        /* ═══════════════════════════════════════
           INVITATION TEXT
        ═══════════════════════════════════════ */
        .invite-section {
            background: var(--wine);
            position: relative;
            overflow: hidden;
        }

        /* wave top */
        .invite-section::before {
            content: '';
            display: block;
            width: 100%;
            height: 70px;
            background: var(--cream);
            clip-path: ellipse(60% 100% at 50% 0%);
        }

        /* geometric grid bg */
        .invite-grid-bg {
            position: absolute;
            inset: 0;
            opacity: 0.04;
            pointer-events: none;
            background-image:
                    linear-gradient(rgba(212,230,244,1) 1px, transparent 1px),
                    linear-gradient(90deg, rgba(212,230,244,1) 1px, transparent 1px);
            background-size: 48px 48px;
        }

        .invite-body {
            position: relative; z-index: 1;
            max-width: 580px;
            margin: 0 auto;
            padding: 0px 32px 88px;
            text-align: center;
        }

        .invite-pre {
            font-family: 'Tenor Sans', sans-serif;
            font-size: 9px;
            letter-spacing: 5px;
            color: var(--gold);
            opacity: 0.6;
            text-transform: uppercase;
            margin-bottom: 28px;
        }

        .invite-headline {
            font-family: 'Tenor Sans', sans-serif;
            font-size: clamp(12px, 2.5vw, 15px);
            letter-spacing: 1.5px;
            color: var(--gold-light);
            line-height: 1.7;
            margin-bottom: 36px;
        }

        .invite-text {
            font-family: 'EB Garamond', serif;
            font-style: italic;
            font-size: clamp(17px, 3.2vw, 21px);
            color: rgba(212,230,244,0.7);
            line-height: 1.9;
            margin-bottom: 40px;
        }

        .invite-names {
            font-family: 'Cormorant', serif;
            font-style: italic;
            font-weight: 300;
            font-size: clamp(46px, 9vw, 72px);
            color: var(--gold-light);
            line-height: 0.92;
        }

        .inv-amp {
            font-size: 0.5em;
            color: var(--gold);
            display: block;
            line-height: 1.8;
        }

        .invite-rule {
            width: 140px;
            height: 1px;
            background: linear-gradient(to right, transparent, var(--gold), transparent);
            opacity: 0.4;
            margin: 22px auto;
        }

        .invite-meta {
            font-family: 'Tenor Sans', sans-serif;
            font-size: 10px;
            letter-spacing: 3px;
            color: var(--gold);
            opacity: 0.8;
            line-height: 1.8;
        }

        /* ═══════════════════════════════════════
           COUNTDOWN
        ═══════════════════════════════════════ */
        .countdown-section {
            background: var(--cream);
            padding: 84px 24px;
            position: relative;
            overflow: hidden;
        }

        /* large watermark number */
        .watermark {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-family: 'Cormorant', serif;
            font-style: italic;
            font-size: clamp(160px, 32vw, 260px);
            color: var(--wine);
            opacity: 0.04;
            pointer-events: none;
            white-space: nowrap;
            letter-spacing: -4px;
        }

        .cd-inner {
            max-width: 560px;
            margin: 0 auto;
            text-align: center;
            position: relative; z-index: 1;
        }

        .cd-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 10px;
            margin-top: 44px;
        }

        .cd-box {
            padding: 28px 8px 22px;
            border: 1px solid rgba(26,58,92,0.12);
            position: relative;
            background: white;
            box-shadow: 0 2px 20px rgba(13,35,64,0.06);
        }

        /* top accent line */
        .cd-box::before {
            content: '';
            position: absolute;
            top: 0; left: 16px; right: 16px;
            height: 2px;
            background: var(--wine-light);
            opacity: 0.4;
        }

        .cd-n {
            display: block;
            font-family: 'Cormorant', serif;
            font-style: italic;
            font-weight: 300;
            font-size: clamp(38px, 7vw, 56px);
            color: var(--wine);
            line-height: 1;
        }

        .cd-l {
            display: block;
            font-family: 'Tenor Sans', sans-serif;
            font-size: 7px;
            letter-spacing: 2px;
            color: var(--wine-light);
            opacity: 0.6;
            margin-top: 7px;
            text-transform: uppercase;
        }

        /* ═══════════════════════════════════════
           CALENDAR
        ═══════════════════════════════════════ */
        .calendar-section {
            background: var(--wine-dark);
            position: relative;
            overflow: hidden;
            padding: 0 0 80px;
        }

        /* angled top */
        .calendar-section::before {
            content: '';
            display: block;
            width: 100%;
            height: 64px;
            background: var(--cream);
            clip-path: polygon(0 0, 100% 0, 100% 40%, 0 100%);
        }

        /* dot pattern */
        .cal-dots-bg {
            position: absolute;
            inset: 0;
            background-image: radial-gradient(rgba(168,192,216,0.15) 1px, transparent 1px);
            background-size: 28px 28px;
            pointer-events: none;
        }

        .cal-inner {
            max-width: 420px;
            margin: 0 auto;
            padding: 0 24px;
            text-align: center;
            position: relative; z-index: 1;
        }

        .cal-mo {
            font-family: 'Tenor Sans', sans-serif;
            font-size: 11px;
            letter-spacing: 6px;
            color: var(--gold);
            text-transform: uppercase;
            margin-bottom: 24px;
        }

        .cal-hrow {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            margin-bottom: 6px;
        }

        .cal-hrow span {
            font-family: 'Tenor Sans', sans-serif;
            font-size: 7px;
            letter-spacing: 1px;
            color: rgba(212,230,244,0.35);
            text-align: center;
            padding: 3px 0;
        }

        .cal-grid {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 2px;
        }

        .cday {
            font-family: 'EB Garamond', serif;
            font-size: 17px;
            font-weight: 500;
            color: rgba(212,230,244,0.55);
            text-align: center;
            padding: 9px 2px;
            position: relative;
        }

        .cday.empty { opacity: 0; }

        .cday.today {
            color: #fff;
        }

        .cday.today::before {
            content: '';
            position: absolute;
            inset: 3px;
            border: 2px solid #6aacdf;
            border-radius: 50%;
            animation: ringPulse 2s ease-in-out infinite;
        }

        @keyframes ringPulse {
            0%,100%{ opacity: 1; transform: scale(1); }
            50%{ opacity: 0.5; transform: scale(1.08); }
        }

        .cal-foot {
            margin-top: 18px;
            font-family: 'Tenor Sans', sans-serif;
            font-size: 9px;
            letter-spacing: 3px;
            color: var(--gold);
            opacity: 0.65;
        }

        /* ═══════════════════════════════════════
           RSVP
        ═══════════════════════════════════════ */
        .rsvp-section {
            background: var(--cream);
            padding: 88px 24px 108px;
            position: relative;
            overflow: hidden;
        }

        /* background large circle */
        .rsvp-section::before {
            content: '';
            position: absolute;
            top: -120px;
            right: -120px;
            width: 400px;
            height: 400px;
            border-radius: 50%;
            border: 1px solid rgba(26,58,92,0.07);
            pointer-events: none;
        }

        .rsvp-section::after {
            content: '';
            position: absolute;
            bottom: -80px;
            left: -80px;
            width: 280px;
            height: 280px;
            border-radius: 50%;
            border: 1px solid rgba(26,58,92,0.05);
            pointer-events: none;
        }

        .rsvp-outer {
            max-width: 500px;
            margin: 0 auto;
        }

        .rsvp-card {
            background: var(--wine-dark);
            padding: 48px 40px 52px;
            position: relative;
        }

        /* corner brackets */
        .rsvp-card::before,
        .rsvp-card::after {
            content: '';
            position: absolute;
            width: 24px; height: 24px;
            border-color: var(--gold);
            border-style: solid;
            opacity: 0.35;
        }

        .rsvp-card::before {
            top: 12px; left: 12px;
            border-width: 1px 0 0 1px;
        }

        .rsvp-card::after {
            bottom: 12px; right: 12px;
            border-width: 0 1px 1px 0;
        }

        .rsvp-t {
            font-family: 'Cormorant', serif;
            font-style: italic;
            font-weight: 300;
            font-size: 38px;
            color: var(--gold-light);
            text-align: center;
            margin-bottom: 4px;
        }

        .rsvp-s {
            font-family: 'Tenor Sans', sans-serif;
            font-size: 8px;
            letter-spacing: 3px;
            color: var(--gold);
            opacity: 0.55;
            text-align: center;
            margin-bottom: 38px;
            text-transform: uppercase;
        }

        .fg { margin-bottom: 24px; }

        .fg label {
            display: block;
            font-family: 'Tenor Sans', sans-serif;
            font-size: 8px;
            letter-spacing: 2px;
            color: var(--gold);
            opacity: 0.6;
            text-transform: uppercase;
            margin-bottom: 8px;
        }

        .fg input,
        .fg textarea {
            width: 100%;
            background: rgba(212,230,244,0.06);
            border: none;
            border-bottom: 1px solid rgba(212,230,244,0.18);
            padding: 11px 2px;
            font-family: 'EB Garamond', serif;
            font-size: 18px;
            color: var(--gold-light);
            outline: none;
            transition: border-color 0.3s;
        }

        .fg input::placeholder,
        .fg textarea::placeholder {
            color: rgba(212,230,244,0.28);
            font-style: italic;
        }

        .fg input:focus,
        .fg textarea:focus {
            border-bottom-color: rgba(168,192,216,0.6);
        }

        .fg textarea {
            border: 1px solid rgba(212,230,244,0.12);
            padding: 12px 14px;
            height: 86px;
            resize: none;
        }

        .grd {
            display: grid;
            grid-template-columns: repeat(4,1fr);
            gap: 8px;
        }

        .gopt {
            background: rgba(212,230,244,0.06);
            border: 1px solid rgba(212,230,244,0.12);
            padding: 12px 4px;
            font-family: 'Tenor Sans', sans-serif;
            font-size: 9px;
            letter-spacing: 1px;
            color: rgba(212,230,244,0.5);
            cursor: pointer;
            text-align: center;
            transition: all 0.25s;
        }

        .gopt.on, .gopt:hover {
            background: var(--wine-light);
            border-color: var(--wine-light);
            color: var(--gold-light);
        }

        .sub-btn {
            width: 100%;
            padding: 17px;
            background: transparent;
            border: 1px solid rgba(168,192,216,0.4);
            font-family: 'Tenor Sans', sans-serif;
            font-size: 10px;
            letter-spacing: 4px;
            color: var(--gold-light);
            cursor: pointer;
            margin-top: 12px;
            text-transform: uppercase;
            transition: all 0.3s;
            position: relative;
            overflow: hidden;
        }

        .sub-btn::before {
            content: '';
            position: absolute;
            inset: 0;
            background: var(--wine-light);
            transform: translateX(-100%);
            transition: transform 0.35s ease;
            z-index: 0;
        }

        .sub-btn:hover::before { transform: translateX(0); }
        .sub-btn:hover { border-color: var(--wine-light); }
        .sub-btn span { position: relative; z-index: 1; }

        .ok-state {
            display: none;
            text-align: center;
            padding: 28px 0;
        }

        .ok-icon {
            display: block;
            font-size: 44px;
            margin-bottom: 14px;
            color: var(--gold);
            animation: spin 0.6s ease;
        }

        @keyframes spin {
            from { transform: rotate(-180deg) scale(0); opacity: 0; }
            to   { transform: rotate(0deg) scale(1); opacity: 1; }
        }

        .ok-state p {
            font-family: 'Cormorant', serif;
            font-style: italic;
            font-weight: 300;
            font-size: 24px;
            color: var(--gold-light);
        }

        /* ═══════════════════════════════════════
           FOOTER
        ═══════════════════════════════════════ */
        footer {
            background: var(--wine-dark);
            text-align: center;
            padding: 30px 24px;
        }

        footer p {
            font-family: 'Tenor Sans', sans-serif;
            font-size: 8px;
            letter-spacing: 5px;
            color: var(--gold);
            opacity: 0.3;
        }

        /* ═══════════════════════════════════════
           REVEAL
        ═══════════════════════════════════════ */
        .rv {
            opacity: 0;
            transform: translateY(26px);
            transition: opacity 0.8s ease, transform 0.8s ease;
        }
        .rv.in {
            opacity: 1;
            transform: translateY(0);
        }

        @keyframes fadeUp {
            from { opacity:0; transform:translateY(20px); }
            to   { opacity:1; transform:translateY(0); }
        }
        @keyframes fadeIn {
            from { opacity:0; }
            to   { opacity:1; }
        }
    </style>
</head>
<body>

<!-- ════════════════════════════════
     CONFIG — одна строка, не трогать структуру
════════════════════════════════ -->
<script>
    const CONFIG = {
        names:    { bride: "Аружан", groom: "Данияр" },
        day:      "21-03-2026",
        hour:     "19:00",
        location: "Банкетный зал «Жайлау», Тараз",
        music:    { title: "Наша песня", artist: "Исполнитель", url: "" },
        gallery:  ["","",""]
    };
</script>

<!-- ① HERO ────────────────────────── -->
<section class="hero" id="hero">
    <div class="hero-photo-wrap">
        <div class="hero-photo-placeholder" id="heroPH">
            <svg width="64" height="64" viewBox="0 0 64 64" fill="none">
                <circle cx="32" cy="24" r="12" stroke="white" stroke-width="1.2"/>
                <path d="M8 56 Q32 38 56 56" stroke="white" stroke-width="1.2" fill="none"/>
            </svg>
            <span>Фото пары</span>
        </div>
    </div>
    <div class="hero-overlay"></div>

    <!-- star canvas -->
    <canvas class="stars" id="starsCanvas"></canvas>

    <!-- constellation SVG -->
    <svg class="constellation" viewBox="0 0 400 300" xmlns="http://www.w3.org/2000/svg" preserveAspectRatio="xMidYMid slice">
        <g stroke="#a8c0d8" stroke-width="0.5" fill="none">
            <line x1="40" y1="60" x2="120" y2="30"/>
            <line x1="120" y1="30" x2="200" y2="80"/>
            <line x1="200" y1="80" x2="280" y2="40"/>
            <line x1="280" y1="40" x2="360" y2="90"/>
            <line x1="40" y1="160" x2="130" y2="140"/>
            <line x1="130" y1="140" x2="200" y2="180"/>
            <line x1="200" y1="180" x2="310" y2="160"/>
            <circle cx="40" cy="60" r="2" fill="#a8c0d8" opacity="0.6"/>
            <circle cx="120" cy="30" r="2.5" fill="#a8c0d8" opacity="0.8"/>
            <circle cx="200" cy="80" r="3" fill="#a8c0d8" opacity="0.9"/>
            <circle cx="280" cy="40" r="2" fill="#a8c0d8" opacity="0.6"/>
            <circle cx="360" cy="90" r="2.5" fill="#a8c0d8" opacity="0.7"/>
            <circle cx="130" cy="140" r="2" fill="#a8c0d8" opacity="0.5"/>
            <circle cx="310" cy="160" r="2" fill="#a8c0d8" opacity="0.5"/>
        </g>
    </svg>

    <div class="hero-content">
        <div class="hero-eyebrow">Свадебное приглашение</div>
        <div class="hero-names">
            <span id="hBride">—</span>
            <span class="hero-amp">&</span>
            <span id="hGroom">—</span>
        </div>
        <div class="hero-dateline" id="hDate">—</div>

        <button class="music-btn" id="musicBtn" onclick="toggleMusic()">
            <svg id="mIcon" width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                <path d="M8 5v14l11-7z"/>
            </svg>
            <span id="mLabel">Включить музыку</span>
        </button>
    </div>

    <div class="scroll-cue">
        <span>Листайте вниз</span>
        <div class="scroll-needle"></div>
    </div>
</section>

<!-- ② CAROUSEL ──────────────────── -->
<section class="gallery-section rv">
    <div class="section-head">
        <span class="section-tag">Галерея</span>
        <div class="section-title">Наши моменты</div>
    </div>

    <div class="carousel-viewport" id="carVP">
        <div class="carousel-track" id="carTr"></div>
    </div>

    <div class="carousel-nav">
        <button class="nav-arrow" onclick="carGo(-1)">
            <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M15 18l-6-6 6-6"/>
            </svg>
        </button>
        <div class="nav-dots" id="carDots"></div>
        <button class="nav-arrow" onclick="carGo(1)">
            <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M9 18l6-6-6-6"/>
            </svg>
        </button>
    </div>
</section>

<!-- ③ INVITE ─────────────────────── -->
<section class="invite-section">
    <div class="invite-grid-bg"></div>
    <div class="invite-body rv">
        <div class="invite-pre">— Приглашение —</div>
        <div class="invite-headline">
            ДОРОГИЕ РОДНЫЕ, БЛИЗКИЕ И ДРУЗЬЯ!
        </div>
        <div class="invite-text">
            Мы рады пригласить вас разделить<br>
            с нами этот особенный день.
        </div>
        <div class="invite-names" id="invN">—</div>
        <div class="invite-rule"></div>
        <div class="invite-meta" id="invMeta">—</div>
    </div>
</section>

<!-- ④ COUNTDOWN ─────────────────── -->
<section class="countdown-section">
    <div class="watermark" id="wmark">—</div>
    <div class="cd-inner rv">
        <span class="section-tag">До торжества</span>
        <div class="section-title" style="color:var(--wine)">Ждём вас</div>
        <div class="cd-grid">
            <div class="cd-box"><span class="cd-n" id="cD">00</span><span class="cd-l">Дней</span></div>
            <div class="cd-box"><span class="cd-n" id="cH">00</span><span class="cd-l">Часов</span></div>
            <div class="cd-box"><span class="cd-n" id="cM">00</span><span class="cd-l">Минут</span></div>
            <div class="cd-box"><span class="cd-n" id="cS">00</span><span class="cd-l">Секунд</span></div>
        </div>
    </div>
</section>

<!-- ⑤ CALENDAR ───────────────────── -->
<section class="calendar-section">
    <div class="cal-dots-bg"></div>
    <div class="cal-inner rv">
        <div class="cal-mo" id="calMo">—</div>
        <div class="cal-hrow">
            <span>Пн</span><span>Вт</span><span>Ср</span>
            <span>Чт</span><span>Пт</span><span>Сб</span><span>Вс</span>
        </div>
        <div class="cal-grid" id="calG"></div>
        <div class="cal-foot" id="calF">—</div>
    </div>
</section>

<!-- ⑥ RSVP ───────────────────────── -->
<section class="rsvp-section">
    <div class="rsvp-outer">
        <div class="section-head rv" style="margin-bottom:32px">
            <span class="section-tag">Ответ</span>
            <div class="section-title" style="color:var(--wine)">Подтвердите участие</div>
        </div>

        <div class="rsvp-card rv">
            <div id="rsvpForm">
                <div class="rsvp-t">Ваш ответ</div>
                <div class="rsvp-s">Пожалуйста, заполните форму</div>

                <div class="fg">
                    <label>Ваше имя</label>
                    <input type="text" id="fN" placeholder="Имя и фамилия">
                </div>
                <div class="fg">
                    <label>Телефон</label>
                    <input type="tel" id="fP" placeholder="+7 (___) ___-__-__">
                </div>
                <div class="fg">
                    <label>Количество гостей</label>
                    <div class="grd">
                        <button class="gopt on" data-v="1" onclick="sg(this)">1</button>
                        <button class="gopt" data-v="2" onclick="sg(this)">2</button>
                        <button class="gopt" data-v="3" onclick="sg(this)">3</button>
                        <button class="gopt" data-v="4" onclick="sg(this)">4+</button>
                    </div>
                </div>
                <div class="fg">
                    <label>Пожелания</label>
                    <textarea id="fW" placeholder="Аллергии или особые пожелания..."></textarea>
                </div>
                <button class="sub-btn" onclick="submitRSVP()"><span>Подтвердить присутствие</span></button>
            </div>

            <div class="ok-state" id="rsvpOK">
                <span class="ok-icon">✦</span>
                <p>Спасибо! Ждём вас.</p>
            </div>
        </div>
    </div>
</section>

<footer>
    <p id="footP">—</p>
</footer>

<!-- ════════════════════════════════
     SCRIPT
════════════════════════════════ -->
<script>
    /* ── Date parse ─── */
    const [dd,mm,yy] = CONFIG.day.split('-').map(Number);
    const [hh,mi]    = CONFIG.hour.split(':').map(Number);

    const MONTHS = ["Январь","Февраль","Март","Апрель","Май","Июнь",
        "Июль","Август","Сентябрь","Октябрь","Ноябрь","Декабрь"];
    const MGEN   = ["января","февраля","марта","апреля","мая","июня",
        "июля","августа","сентября","октября","ноября","декабря"];

    /* ── Fill hero ─── */
    document.getElementById('hBride').textContent = CONFIG.names.bride;
    document.getElementById('hGroom').textContent = CONFIG.names.groom;
    document.getElementById('hDate').textContent  = `${dd} ${MGEN[mm-1]} ${yy}  ·  ${CONFIG.hour}`;

    /* ── Fill invite ─── */
    document.getElementById('invN').innerHTML =
        `${CONFIG.names.bride}<span class="inv-amp">&</span>${CONFIG.names.groom}`;
    document.getElementById('invMeta').innerHTML =
        `${dd} ${MGEN[mm-1]} ${yy}<br>${CONFIG.hour}  ·  ${CONFIG.location}`;

    /* ── Footer ─── */
    document.getElementById('footP').textContent =
        `${CONFIG.names.bride} & ${CONFIG.names.groom}  ·  ${yy}`;

    /* ── Watermark ─── */
    document.getElementById('wmark').textContent = `${dd}.${String(mm).padStart(2,'0')}`;

    /* ── Calendar ─── */
    document.getElementById('calMo').textContent = `${MONTHS[mm-1].toUpperCase()} ${yy}`;
    document.getElementById('calF').textContent  = `${CONFIG.hour}  ·  ${CONFIG.location}`;
    (function(){
        const g = document.getElementById('calG');
        const first = new Date(yy,mm-1,1).getDay();
        const off   = first===0?6:first-1;
        const days  = new Date(yy,mm,0).getDate();
        g.innerHTML = '';
        for(let i=0;i<off;i++){const e=document.createElement('div');e.className='cday empty';e.textContent='';g.appendChild(e);}
        for(let d=1;d<=days;d++){const e=document.createElement('div');e.className='cday'+(d===dd?' today':'');e.textContent=d;g.appendChild(e);}
    })();

    /* ── Countdown ─── */
    const target = new Date(yy,mm-1,dd,hh,mi,0);
    function pad(n){return String(n).padStart(2,'0');}
    function tick(){
        const diff = target - new Date();
        if(diff<=0){['cD','cH','cM','cS'].forEach(id=>document.getElementById(id).textContent='00');return;}
        document.getElementById('cD').textContent=pad(Math.floor(diff/86400000));
        document.getElementById('cH').textContent=pad(Math.floor(diff%86400000/3600000));
        document.getElementById('cM').textContent=pad(Math.floor(diff%3600000/60000));
        document.getElementById('cS').textContent=pad(Math.floor(diff%60000/1000));
    }
    tick(); setInterval(tick,1000);

    /* ── Carousel ─── */
    let carIdx = 0;
    const carTr   = document.getElementById('carTr');
    const carDots = document.getElementById('carDots');
    const slides  = CONFIG.gallery.length ? CONFIG.gallery : ['','',''];

    const BG = [
        'linear-gradient(135deg,#0d2340,#1a3a5c)',
        'linear-gradient(135deg,#0a1e38,#2a5080)',
        'linear-gradient(135deg,#0f2a4a,#1e4870)'
    ];

    slides.forEach((url,i)=>{
        const sl = document.createElement('div');
        sl.className = 'car-slide'+(i===0?' active':'');
        sl.style.background = BG[i%BG.length];

        if(url){
            const img = document.createElement('img');
            img.src = url;
            sl.appendChild(img);
        } else {
            const ph = document.createElement('div');
            ph.className = 'car-placeholder';
            ph.style.background = BG[i%BG.length];
            ph.innerHTML=`<svg width="44" height="44" viewBox="0 0 64 64" fill="none"><circle cx="32" cy="24" r="12" stroke="rgba(212,230,244,.25)" stroke-width="1.2"/><path d="M8 56 Q32 38 56 56" stroke="rgba(212,230,244,.25)" stroke-width="1.2" fill="none"/></svg><span>Фото ${i+1}</span>`;
            sl.appendChild(ph);
        }

        sl.addEventListener('click',()=>{carIdx=i;updateCar();});
        carTr.appendChild(sl);

        const dot = document.createElement('div');
        dot.className = 'nav-dot'+(i===0?' on':'');
        dot.addEventListener('click',()=>{carIdx=i;updateCar();});
        carDots.appendChild(dot);
    });

    function updateCar(){
        const sls  = carTr.querySelectorAll('.car-slide');
        const dots = carDots.querySelectorAll('.nav-dot');
        const sw   = sls[0].offsetWidth + 14;
        const vw   = carTr.parentElement.offsetWidth;
        const off  = carIdx * sw - vw/2 + sw/2 - 36;
        carTr.style.transform = `translateX(${-Math.max(0,off)}px)`;
        sls.forEach((s,i)=>s.classList.toggle('active',i===carIdx));
        dots.forEach((d,i)=>d.classList.toggle('on',i===carIdx));
    }

    function carGo(dir){
        carIdx = (carIdx+dir+slides.length)%slides.length;
        updateCar();
    }

    let ts=0;
    carTr.addEventListener('touchstart',e=>ts=e.touches[0].clientX,{passive:true});
    carTr.addEventListener('touchend',e=>{
        if(Math.abs(e.changedTouches[0].clientX-ts)>40) carGo(e.changedTouches[0].clientX<ts?1:-1);
    });

    setInterval(()=>carGo(1), 4500);

    /* ── Stars canvas ─── */
    (function(){
        const cv = document.getElementById('starsCanvas');
        const ctx = cv.getContext('2d');
        let W,H,stars=[];

        function resize(){
            W = cv.width  = cv.offsetWidth;
            H = cv.height = cv.offsetHeight;
            stars = Array.from({length:90},()=>({
                x: Math.random()*W,
                y: Math.random()*H,
                r: Math.random()*1.4+0.3,
                a: Math.random(),
                da: (Math.random()-0.5)*0.006
            }));
        }

        function draw(){
            ctx.clearRect(0,0,W,H);
            stars.forEach(s=>{
                s.a = Math.max(0.1, Math.min(1, s.a+s.da));
                if(s.a<=0.1||s.a>=1) s.da*=-1;
                ctx.beginPath();
                ctx.arc(s.x,s.y,s.r,0,Math.PI*2);
                ctx.fillStyle=`rgba(168,192,216,${s.a})`;
                ctx.fill();
            });
            requestAnimationFrame(draw);
        }

        resize();
        window.addEventListener('resize',resize);
        draw();
    })();

    /* ── Music ─── */
    let audio=null, playing=false;

    function toggleMusic(){
        if(!audio){
            const url = CONFIG.music && CONFIG.music.url;
            if(url){
                audio = new Audio(url);
            } else {
                const inp = document.createElement('input');
                inp.type='file'; inp.accept='audio/*';
                inp.onchange=e=>{
                    const f=e.target.files[0]; if(!f) return;
                    audio=new Audio(URL.createObjectURL(f));
                    audio.addEventListener('ended',()=>{playing=false;updateMUI();});
                    playA();
                };
                inp.click(); return;
            }
        }
        playing ? (audio.pause(),playing=false) : playA();
        updateMUI();
    }

    function playA(){ audio.play(); playing=true; updateMUI(); }

    function updateMUI(){
        document.getElementById('mIcon').innerHTML = playing
            ? '<rect x="6" y="4" width="4" height="16"/><rect x="14" y="4" width="4" height="16"/>'
            : '<path d="M8 5v14l11-7z"/>';
        document.getElementById('mLabel').textContent = playing ? 'Пауза' : 'Включить музыку';
    }

    /* ── RSVP ─── */
    function sg(b){
        document.querySelectorAll('.gopt').forEach(x=>x.classList.remove('on'));
        b.classList.add('on');
    }

    function submitRSVP(){
        const n=document.getElementById('fN').value.trim();
        const p=document.getElementById('fP').value.trim();
        if(!n){document.getElementById('fN').focus();return;}
        if(!p){document.getElementById('fP').focus();return;}
        document.getElementById('rsvpForm').style.display='none';
        document.getElementById('rsvpOK').style.display='block';
    }

    /* ── Scroll reveal ─── */
    const obs = new IntersectionObserver(es=>{
        es.forEach(e=>{ if(e.isIntersecting) e.target.classList.add('in'); });
    },{threshold:0.12});
    document.querySelectorAll('.rv').forEach(el=>obs.observe(el));
</script>
</body>
</html>